alias DIAL d0
alias IN d1
alias OUT d2
alias MAXT r0
alias MINT r1
alias CURT r2
alias CURP r3
alias OXYGEN r4
alias POLLUTANT r5
alias CO2 r6
alias VOLATILES r7
alias WATER r8
alias N2O r9
alias RatioOxygen r10
alias RatioNitrogen r11
alias RatioCarbonDioxide r12
alias MODE r13
alias PressureCible r14
alias OxygenCible r15
alias NitrogenCible r16
alias CarbonDioxideCible r17
define KELVIN 273
define SENSOR -1252983604
define HEATER 24258244
define COOLER -1567752627

start:
yield
j config
begin:
add MAXT MAXT KELVIN
add MINT MINT KELVIN
#Check temperature
lb CURT SENSOR Temperature Average
bgtal CURT MAXT cool
bltal CURT MINT heat
bleal CURT MAXT off
bgeal CURT MINT off
#Check pressure
lb CURP SENSOR Pressure Average
lb OXYGEN SENSOR RatioOxygen Average
lb POLLUTANT SENSOR RatioPollutant Average
lb CO2 SENSOR RatioCarbonDioxide Average
lb VOLATILES SENSOR RatioVolatiles Average
lb WATER SENSOR RatioWater Average
lb N2O SENSOR RatioNitrousOxide Average
#Check value ratio
bltal OXYGEN 0.200 inOn
bgtal OXYGEN 0.300 inOn
bgtal POLLUTANT 0 inOn
bgtal CO2 0.200 inOn
bgtal VOLATILES 0 inOn
bgtal WATER 0 inOn
bgtal N2O 0 inOn
#Check value pressure
bltal CURP 101 inOn
bgtal CURP 101 outOn
bleal CURP 101 outOff
#Fin
j start

cool:
sb COOLER On 1
sb HEATER On 0
j ra
heat:
sb HEATER On 1
sb COOLER On 0
j ra
off:
sb HEATER On 0
sb COOLER On 0
j ra
inOn:
s IN On 1
j ra
inOff:
s IN On 0
j ra
outOn:
s OUT On 1
j ra
outOff:
s OUT On 0
j ra

config:
l MODE DIAL Setting
move PressureCible 101
beq DIAL 0 configDepressurize
beq DIAL 1 configRoom
beq DIAL 2 configGreenhouse
beq DIAL 3 configFridge
j configRoom
configRoom:
move MAXT 22
move MINT 19
move RatioOxygen 0.2
move RatioNitrogen 0.7
move RatioCarbonDioxide 0.1
j begin
configGreenhouse:
move MAXT 30
move MINT 25
move RatioOxygen 0.1
move RatioNitrogen 0
move RatioCarbonDioxide 0.9
j begin
configFridge:
move MAXT -163
move MINT -163
move OxygenCible 0
move NitrogenCible 1
move CarbonDioxideCible 0
j begin
configDepressurize:
move PressureCible 0
j begin
